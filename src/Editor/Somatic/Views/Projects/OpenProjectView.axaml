<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Somatic.ViewModels"
			 xmlns:ext="clr-namespace:Somatic.Extensions"
			 xmlns:model="clr-namespace:Somatic.Model"
			 xmlns:control="clr-namespace:Somatic.Controls"
			 x:DataType="vm:OpenProjectViewModel"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="Somatic.Views.OpenProjectView">
	<Design.DataContext>
		<vm:OpenProjectViewModel/>
	</Design.DataContext>
	
	<Grid ColumnDefinitions="*,2*" RowDefinitions="*,auto">
		<control:SearchControl Grid.Column="0" Grid.Row="0" x:Name="projectsListBox"
							   SearchWatermark="{ext:TranslateMarkup search}"
							   ItemsSource="{Binding Projects}"
							   SelectedItem="{Binding SelectedProject}">
			<control:SearchControl.ItemTemplate>
				<DataTemplate x:DataType="model:ProjectData">
					<StackPanel>
						<StackPanel Orientation="Horizontal">
							<Image Source="{Binding Icon}"/>
							<Label Content="{Binding Name}" VerticalAlignment="Center"/>
						</StackPanel>
						<Label Content="{Binding LastTime}" FontSize="8"/>
					</StackPanel>
				</DataTemplate>
			</control:SearchControl.ItemTemplate>
		</control:SearchControl>

		<Grid Grid.Column="1" RowDefinitions="auto,*">
			<Button Grid.Row="0" Margin="5" HorizontalAlignment="Right" 
					Content="{ext:TranslateMarkup OpPr_newProject}"
					Command="{Binding NewProjectCommand}"
					CommandParameter="{Binding $parent[Window]}"/>
			
			<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
				<Grid RowDefinitions="auto,auto,auto,auto,*">
					<Image Source="{Binding #projectsListBox.SelectedItem.(model:ProjectData).Screenshot}" Height="250"/>
					<TextBox Grid.Row="1" IsEnabled="False"
							 Watermark="{ext:TranslateMarkup OpPr_name}"
							 Text="{Binding #projectsListBox.SelectedItem.(model:ProjectData).Name}"
							 Margin="0 10 10 0"/>
					<TextBox Grid.Row="2" IsEnabled="False"
							 Watermark="{ext:TranslateMarkup OpPr_path}"
							 Text="{Binding #projectsListBox.SelectedItem.(model:ProjectData).Path}"
							 Margin="0 10 10 0"/>
					<TextBox Grid.Row="3" IsEnabled="False"
							 Watermark="{ext:TranslateMarkup OpPr_description}"
							 Text="{Binding #projectsListBox.SelectedItem.(model:ProjectData).Description}"
							 TextWrapping="Wrap"
							 Height="100"
							 Margin="0 10 10 0"/>
				</Grid>
			</ScrollViewer>
		</Grid>

		<StackPanel Grid.Column="1" Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
			<Button Content="{ext:TranslateMarkup Button_accept}" IsDefault="True"
					Command="{Binding AcceptCommand}"
					CommandParameter="{Binding $parent[Window]}"/>
			<Button Content="{ext:TranslateMarkup Button_cancel}" IsCancel="True" Margin="10"/>
		</StackPanel>
	</Grid>
</UserControl>
